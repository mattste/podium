{% extends "base.html" %}


{% block super %}
{{ super() }}

<!-- Load c3.css -->
<link href="{{ url_for('static', filename='css/c3.css') }}" rel="stylesheet" type="text/css">
{% endblock %}


{% block content %}
<section class="podium-info">
    <div class="stuff">
        <div class="podium-title">
            <h1>{{ podium.title }}</h1>
            <h2>| Followers: {{ podium.num_subscribers }}</h2>
        </div>
        <hr/>
        <p>
        {{ podium.description }}
        </p>
    </div>

    <div class="graph-area" id="chart">
    </div>
</section>

<section class="latest-poll">
	<h1>Latest Poll</h1>
	<div class="poll-shouts">
	    	
	    	<!-- SHOUT TEMPLATE-->

	    	<article class="bubble">
    			<div class="shout">
    				<i>notifications</i>
    				<hr/>
    				<div class="shout-text">
    					<b>{{ podium.title }}</b>
    					<p>{{ podium.latest_poll.question}}</p>
    				</div>
    			</div>
	    	</article>

	    	<!--  *************  -->
	    	<!-- SHOUT TEMPLATE-->

	    	<article class="bubble">
    			<div class="shout">
    				<i>notifications</i>
    				<hr/>
    				<div class="shout-text">
    					<b>{{ podium.title }}</b>
    					<p>
                            {% for option in podium.latest_poll.options %}
        						{{ option }} <br/>
                            {% endfor %}
    					</p>
    				</div>
    			</div>
	    	</article>

	    	<!--  *************  -->
	</div>
</section>

{% endblock %}

{% block shouts %}
{% include "shouts.html" %}
{% endblock %}

{% block scripts %}
    {{ super() }}
    <script src="https://cdn.socket.io/socket.io-1.4.5.js"></script>
    <script src="{{ url_for('static', filename='js/sockets.js') }}"></script>
    <script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>
    <script src="{{ url_for('static', filename='js/c3.js') }}"></script>
    <script>
    var chart = c3.generate({
        bindto: '#chart',
        size: {
            height: 350,
            width: 350
        },
        data: {
            columns: [
                ['A', 5],
                ['B', 12],
                ['C', 9],
                ['D', 6],
            ],
            type : 'donut',
        },
        donut: {
            title: "Latest Poll"
        }
    });

    setTimeout(function () {
        chart.load({
            columns: [
                ['A', 5],
                ['B', 12],
                ['C', 10],
                ['D', 6],
            ]
        });
    }, 500);

    </script>
{% endblock %}